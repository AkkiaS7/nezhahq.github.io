---
outline: deep
---

# 任务管理

**在任务区域中，可以设置计划任务，触发任务，多服务器批量执行任务** 

哪吒监控支持推送命令到 Agent 执行，此功能非常灵活。使用此功能可以定期结合 restic、rclone 给服务器备份，定期重启某项服务来重置网络连接。也可以配合告警通知，在触发告警时执行某项任务，例如在 CPU 长时间高占用的情况下运行某个脚本。

## 使用方法

进入管理面板的“任务”页，点击“添加计划任务”。添加计划任务时，你需要填入以下参数：

- **名称**：自定义一个任务名称。

- **任务类型**：选择任务的类型。
  - **计划任务**：按下方设置的计划时间，周期性执行任务。
  - **触发任务**：仅被 API 或告警规则触发的任务，每次触发执行一次。

- **计划**：设置计划时间（使用触发任务类型时不生效），时间格式为：`* * * * * *`，分别对应`秒 分 时 天 月 星期`，详情见[计划表达式格式](https://pkg.go.dev/github.com/robfig/cron/v3#hdr-CRON_Expression_Format)。  
例如：`0 0 3 * * *` 对应为“每天 3 点”。

- **命令**：设置需要执行的命令，就像写 Shell/Bat 脚本一样，但不推荐换行，多个命令使用 `&&/&` 连接。  
例如执行定期重启命令，可以在这里输入 `reboot`。

- **覆盖范围**和**特定服务器**：选择规则来确定哪些 Agent 执行计划任务，类似于“服务”页中的设置。使用触发任务类型时，可选择“由触发的服务器执行”。

- **通知方式组**：选择你已经在“告警”页设置好的通知方式，[点击这里](/guide/notifications.html#灵活的通知方式)了解详情。

- **推送成功的消息**：勾选此项，任务执行成功后会触发消息通知。

## 管理任务

如需对已有的计划任务进行管理，可以前往管理面板中的“任务”页。选择一条任务配置，右侧的三个图标分别是：

- **立即执行**：点击后将忽略计划时间，立刻执行任务。
- **编辑**：点击可以修改任务配置。
- **删除**：删除这条计划任务。

## 常见问题

1. **xxx 命令找不到**  
如果运行失败，提示 xxx 命令找不到，可能是 PATH 环境变量的问题。在 Linux 服务器上，可以在命令开头加入 `source ~/.bashrc`，或者使用绝对路径执行命令。